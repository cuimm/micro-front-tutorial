<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
<a href="/#app1">app1</a>
<a href="/#app2">app2</a>

<a onclick="a()">应用1</a>
<a onclick="b()">应用2</a>
<script src="/lib/umd/single-spa.js"></script>
<script>
  function a(){
    history.pushState({},'','/app1')
  }
  function b(){
    history.pushState({},'','/app2')
  }
  singleSpa.registerApplication(
      'app1',
      async () => {
        return {
          // bootstrap: [
          //   async () => {
          //     console.log('bootstrap');
          //   },
          //   async () => {
          //   },
          // ],
          bootstrap: async () => {
            console.log('app1 bootstrap');
          },
          mount: async () => {
            console.log('app1 mount');
          },
          unmount: async () => {
            console.log('app1 unmount');
          },
        }
      },
      location => location.pathname.startsWith('/app1'),
      // location => location.hash.startsWith('#app1'),
      {
        store: {
          name: 'cuimm'
        },
      }
  );
  singleSpa.registerApplication(
      'app2',
      async () => {
        return {
          // bootstrap: [
          //   async () => {
          //     console.log('bootstrap');
          //   },
          //   async () => {
          //   },
          // ],
          bootstrap: async () => {
            console.log('app2 bootstrap');
          },
          mount: async () => {
            console.log('app2 mount');
          },
          unmount: async () => {
            console.log('app2 unmount');
          },
        }
      },
      location => location.pathname.startsWith('/app2'),
      // location => location.hash.startsWith('#app2'),
      {
        store: {
          name: 'cuimm'
        },
      }
  );
  singleSpa.start();
</script>
</body>
</html>
